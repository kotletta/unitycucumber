Этот скрипт предназначен для создания кругового движения объекта (например, огурца) вокруг определенной точки в пространстве, одновременно вращая этот объект вокруг своей собственной оси.
Сам скрипт:
using UnityEngine;


public class CircularMotionWithRotation : MonoBehaviour
{
    public float radius = 5f;        // Радиус окружности
    public float orbitalSpeed = 2f;   // Скорость движения по орбите (градусы в секунду)
    public float rotationSpeed = 100f;   // Скорость вращения вокруг своей оси (градусы в секунду)
    public Vector3 center = Vector3.zero; // Центр окружности
    public Vector3 rotationAxis = Vector3.up; // Ось вращения объекта

    private float currentAngle = 0f; // Текущий угол орбиты

    void Update()
    {
        // Увеличиваем угол орбиты
        currentAngle += orbitalSpeed * Time.deltaTime;

        // Преобразуем угол в радианы
        float radianAngle = Mathf.Deg2Rad * currentAngle;

        // Вычисляем позицию на окружности
        float x = center.x + radius * Mathf.Cos(radianAngle);
        float z = center.z + radius * Mathf.Sin(radianAngle);

        // Устанавливаем позицию объекта
        transform.position = new Vector3(x, center.y, z);

        // Вращаем объект вокруг своей оси
        transform.Rotate(rotationAxis, rotationSpeed * Time.deltaTime);
    }
}

Функциональность:

•  Круговое движение (орбитальное): Объект двигается по круговой траектории вокруг заданного центра. Скорость движения по орбите регулируется параметром orbitalSpeed.
•  Вращение вокруг своей оси (собственное вращение): Объект вращается вокруг указанной оси с заданной скоростью. Ось и скорость вращения регулируются параметрами rotationAxis и rotationSpeed, соответственно.

Параметры скрипта (настраиваемые в Unity Inspector):

•  Radius (Радиус): Радиус окружности, по которой двигается объект. Определяет расстояние от объекта до центра вращения.
•  Orbital Speed (Орбитальная скорость): Скорость движения объекта по круговой траектории, измеряется в градусах в секунду. Положительные значения приводят к вращению по часовой стрелке, отрицательные - против часовой стрелки.
•  Rotation Speed (Скорость вращения): Скорость вращения объекта вокруг собственной оси, измеряется в градусах в секунду. Положительные значения вращают по часовой стрелке, отрицательные - против часовой стрелки.
•  Center (Центр): Координаты центра окружности, вокруг которой происходит движение. По умолчанию (0, 0, 0) – начало координат. Изменение Y-координаты позволяет переместить плоскость вращения по вертикали.
•  Rotation Axis (Ось вращения): Ось, вокруг которой объект вращается. Можно использовать предопределенные оси (Vector3.up, Vector3.down, Vector3.right, Vector3.left, Vector3.forward, Vector3.back) или создать собственную. Ось вращения определяет направление вращения объекта вокруг самого себя.

Принцип работы:

1. Скрипт прикрепляется к игровому объекту.
2. В функции Update(), которая вызывается каждый кадр, происходит обновление позиции и ориентации объекта.
3. Для вычисления позиции объекта на круговой траектории используется математика:
  •  Вычисляется угол currentAngle, который увеличивается с каждым кадром в зависимости от скорости orbitalSpeed.
  •  Угол преобразуется в радианы для использования в функциях Mathf.Cos() и Mathf.Sin().
  •  Координаты X и Z объекта вычисляются на основе радиуса radius, текущего угла radianAngle и координат центра center.
4. Для вращения объекта вокруг своей оси используется функция transform.Rotate(), которая поворачивает объект вокруг заданной оси на определенный угол.

Применение:

Этот скрипт можно использовать для создания различных визуальных эффектов, например:

•  Моделирование движения планет вокруг звезды.
•  Вращающиеся объекты в космических играх.
